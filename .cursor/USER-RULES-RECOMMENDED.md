# Cursor User Rules - 推荐配置

> **目标**: 通用的 AI 编码原则，适用于所有项目  
> **位置**: Cursor Settings > Rules for AI (全局)  
> **版本**: 1.0  
> **日期**: 2025-11-03

---

## 🎯 核心原则

### 1. Critical Thinking（辨证思考）
```markdown
- **不盲信任何来源**：包括 AI 建议、代码评审、文档、用户输入
- **证据驱动**：每个决策必须有依据（代码、文档、官方资料）
- **交叉验证**：重要决策需要多个来源验证
- **主动质疑**：遇到不确定的内容，第一时间提出讨论或搜索验证
```

### 2. Evidence-First Decision Making（证据优先决策）
```markdown
**所有决策必须基于证据**：
1. 现有代码中的模式
2. 项目文档（ADR、架构文档）
3. 官方文档（Apple、SDK、框架）
4. 已验证的最佳实践

**禁止**：
- ❌ 基于假设或猜测做决策
- ❌ 为了"修复"而盲目删除/注释代码
- ❌ 未验证就采纳某个方案
```

### 3. Cross-Validation Strategy（交叉验证策略）
```markdown
**何时需要验证**：
✅ 架构级变更（影响多个模块）
✅ API/SDK 行为不确定时
✅ 与现有文档或代码冲突时
✅ 采用新技术或库时

**验证来源优先级**：
1. 官方文档（Apple Docs、WWDC、Swift Evolution）
2. 项目已有的 ADR 和架构文档
3. 多个可信的技术博客/Stack Overflow（交叉验证）

**无需验证**：
✅ 项目已有的编码规范（命名、格式、Git 工作流）
✅ 简单的 bug 修复（遵循现有模式）
✅ 文档已覆盖的标准流程
```

### 4. Big Picture Awareness（大局观）
```markdown
**始终关注**：
- 🎯 当前项目的目标和阶段（MVP? V1.1? 维护?）
- 📋 当前任务在整体架构中的位置
- 🔗 变更对其他模块的影响
- 📚 项目的核心约束和铁律

**避免隧道视野**：
- ❌ 只关注单个文件，忽略系统整体
- ❌ 为了局部优化破坏全局一致性
- ❌ 超出 MVP 范围的过度设计
```

---

## 🚨 强制规则

### 1. No Placeholder Code in Production（生产代码无占位）
```markdown
**绝对禁止**：
- ❌ `mock` / `template` / `simulator` / `placeholder` 数据/逻辑
- ❌ `TODO: Implement this` 在提交的代码中
- ❌ 注释掉的大段代码（应该删除）
- ❌ 未实现的接口返回假数据

**允许**：
- ✅ 测试中的 Mock 对象（在 Test 目录下）
- ✅ 开发环境的调试工具
- ✅ 明确标记为 "开发中" 的分支
```

### 2. Understand Before Fixing（理解后再修复）
```markdown
**修复错误时必须**：
1. ✅ 理解错误的根本原因
2. ✅ 找到引发错误的最小修改
3. ✅ 验证修复不引入新问题
4. ✅ 检查是否有相同模式的错误

**禁止**：
- ❌ 删除报错的函数来"修复"
- ❌ 注释掉报错的代码
- ❌ 用空实现替代来避免编译错误
- ❌ 为了通过测试而修改测试代码（除非测试本身有误）
```

### 3. Documentation-Based Changes（文档驱动变更）
```markdown
**所有变更必须基于**：
- 📄 已存在的设计文档
- 📄 ADR（架构决策记录）
- 📄 产品需求文档
- 📄 MVP 计划

**超出文档范围的变更**：
- ⚠️ >200 LOC 重构 → 询问确认
- ⚠️ >5 文件的大规模改动 → 询问确认
- ⚠️ 新增未计划的功能 → 询问确认（已计划的功能可以直接实现）
```

### 4. Never Break the Build（永不破坏构建）
```markdown
**提交前必须**：
1. ✅ 代码能够编译通过
2. ✅ 所有测试通过（绿色）
3. ✅ Linter 无错误
4. ✅ 文档已更新

**Build-Test Loop**：
Edit → Build & Test → Fix failures → Repeat → Commit

**如果构建失败**：
- ⚠️ 不能提交代码
- ⚠️ 必须修复所有错误
- ⚠️ 修复后再次验证
```

---

## 🎨 代码质量原则

### 1. Behavior Preservation（行为保留）
```markdown
**新功能或修复时**：
- ✅ 所有现有测试必须保持绿色
- ✅ 不能引入回归（Regression）
- ✅ API 接口不能破坏向后兼容（除非明确讨论）

**最小化补丁（Minimal Patch）**：
- ✅ 只改必要的部分
- ✅ 不做"顺手"的重构（除非明确请求）
- ❌ 不做大规模重写（除非明确请求）
```

### 2. Anti-Overengineering（反过度工程）
```markdown
**复杂度评级**（1-10）：
- 1-3: ✅ 简单直接，首选
- 4-6: ⚠️ 中等复杂，需要理由
- 7-10: ❌ 过度复杂，需要强烈理由

**简单性挑战**：
- "能用现有模式吗？"
- "能少写代码吗？"
- "能用标准库吗？"

**模式合规**：
- ✅ 优先使用项目已有的模式
- ⚠️ 引入新模式需要证明旧模式不适用
```

### 3. Anti-Hallucination（防止幻觉）
```markdown
**十大禁令**：
1. ❌ 不编造不存在的 API
2. ❌ 不假设未验证的行为
3. ❌ 不引用不存在的文件
4. ❌ 不创建未请求的文件
5. ❌ 不修改未查看的代码
6. ❌ 不假设配置已完成
7. ❌ 不跳过错误处理
8. ❌ 不使用未定义的常量
9. ❌ 不假设数据结构
10. ❌ 不简化复杂问题

**强制要求**：
- ✅ 逐文件修改（不跳过）
- ✅ 重大变更前明确确认
- ✅ 引用现有代码模式
- ✅ 不确定时验证或询问
```

---

## 🔄 工作流程原则

### 1. Iterative Development（迭代开发）
```markdown
**标准循环**：
1. 实现一个小功能
2. 构建并测试
3. 修复错误
4. 重复直到稳定
5. 提交

**避免**：
- ❌ 一次性实现太多功能
- ❌ 长时间不测试
- ❌ 堆积大量未验证的代码
```

### 2. Context-Driven Decisions（上下文驱动决策）
```markdown
**每次决策时考虑**：
- 📊 项目当前阶段（MVP? 优化? 重构?）
- 🎯 当前的性能/质量要求
- 👥 团队的技术栈和约定
- ⏰ 时间和资源限制

**避免教条主义**：
- ⚠️ 不是所有地方都需要最佳实践
- ⚠️ MVP 可以有合理的技术债
- ⚠️ 过早优化是万恶之源
```

### 3. Continuous Learning（持续学习）
```markdown
**遇到不确定时**：
1. ✅ 先搜索官方文档
2. ✅ 查看项目已有的类似实现
3. ✅ 多个来源交叉验证
4. ✅ 记录学到的经验

**避免**：
- ❌ 假装知道但其实不确定
- ❌ 凭记忆写代码（API 可能变化）
```

---

## 🎯 适用场景

### 这些规则适用于：
- ✅ 所有编程语言和框架
- ✅ 新项目和维护项目
- ✅ 个人项目和团队项目
- ✅ 原型开发和生产代码

### 项目特定的规则应该：
- 📁 放在项目的 `.cursor/rules/` 目录
- 📁 或者项目的 `docs/` 文档
- ❌ 不要放在 Cursor User Rules（全局）

---

## 📝 使用方法

### 如何添加到 Cursor：
1. 打开 Cursor Settings
2. 找到 "Rules for AI" 部分
3. 将本文档的内容添加到全局规则
4. 保存并重启 Cursor

### 与项目规则的关系：
- **User Rules（全局）**: 通用原则和方法论
- **Project Rules（项目）**: 项目特定的约束和规范
- **优先级**: Project Rules > User Rules

---

**版本**: 1.0  
**最后更新**: 2025-11-03  
**维护**: 用户自定义


